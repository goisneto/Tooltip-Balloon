!function(t){t.fn.balloon=function(o){var i=5,r={delay:350,balloon:"",position:"bottom",html:!1};return"remove"===o?(this.each(function(){t("#"+t(this).attr("data-balloon-id")).remove(),t(this).removeAttr("data-balloon-id"),t(this).off("focus.balloon blur.balloon")}),!1):(o=t.extend(r,o),this.each(function(){var r=Materialize.guid(),a=t(this);a.attr("data-balloon-id")&&t("#"+a.attr("data-balloon-id")).remove(),a.attr("data-balloon-id",r);var n,s,d,l,h,u,f,p,g=function(){n=a.attr("data-html")?"true"===a.attr("data-html"):o.html,s=a.attr("data-delay"),s=void 0===s||""===s?o.delay:s,d=a.attr("data-position"),d=void 0===d||""===d?o.position:d,l=a.attr("data-balloon"),l=void 0===l||""===l?o.balloon:l};g();var c=function(){return h=t('<a href="#!" class="material-balloon"></a>'),f=t("<div></div>"),p=t('<div class="container-balloon"></div>'),f.css({"background-color":"#323232",position:"absolute",width:"10px",height:"10px"}).appendTo(h),h.click(function(t){return t.preventDefault(),!1}),l=n?t("<span></span>").html(l):t("<span></span>").text(l),p.append(l),h.append(p).appendTo(t("body")).attr("id",r),u=t('<div class="backdrop"></div>'),u.appendTo(p),h};c(),a=a.add(h),a.off("focus.balloon blur.balloon");var x,m=!1;a.on({"focus.balloon":function(t){if(t.preventDefault(),m===!0)return!0;var o=function(){g(),h.css("height",p.outerHeight()),m=!0,h.velocity("stop"),u.velocity("stop"),h.css({visibility:"visible",left:"0px",top:"0px"});var t,o,r,n=a.outerWidth(),s=a.outerHeight(),l=h.outerHeight(),c=h.outerWidth(),x="0px",w="0px",b=u[0].offsetWidth,v=u[0].offsetHeight,y=8,W=8,H=0;"top"===d?(t=a.offset().top-l-i,o=a.offset().left+n/2-c/2,r=e(o,t,c,l),x="-10px",u.css({bottom:0,left:0,borderRadius:"14px 14px 0 0",transformOrigin:"50% 100%",marginTop:l,marginLeft:c/2-b/2}),r.x<h.outerWidth()/2+4?f.css({bottom:"5px",margin:-(f.outerWidth()*Math.SQRT2)/2+"px",left:(r.x>4?r.x/2:-4)+a.outerWidth()/2+a.offset().left+"px",transform:"rotate(45deg) translateX(50%)"}):r.x>=window.innerWidth-h.outerWidth()-4?f.css({bottom:"5px",margin:-(f.outerWidth()*Math.SQRT2)/2+"px",right:(window.innerWidth-h.outerWidth()-r.x>4?(window.innerWidth-h.outerWidth()-r.x)/2:-4)+a.outerWidth()/2+(window.innerWidth-(a.offset().left+a.outerWidth()))+"px",transform:"rotate(45deg) translateX(50%)"}):f.css({bottom:-(f.outerWidth()*Math.SQRT2)/2+"px",left:"50%",transform:"rotate(45deg) translateX(-50%)"})):"left"===d?(t=a.offset().top+s/2-l/2,o=a.offset().left-c-i,r=e(o,t,c,l),w="-10px",u.css({top:"-7px",right:0,width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:l/2,marginLeft:c}),r.y<h.outerHeight()/2+4?f.css({right:"-1px",margin:-(f.outerHeight()*Math.SQRT2)/2+"px",top:(r.y>4?r.y/2:-4)+a.outerHeight()/2+a.offset().top+"px",transform:"rotate(45deg) translateY(50%)"}):r.y>=window.innerHeight-h.outerHeight()-4?f.css({right:"-1px",margin:-(f.outerHeight()*Math.SQRT2)/2+"px",bottom:(window.innerHeight-h.outerHeight()-r.y>4?(window.innerHeight-h.outerHeight()-r.y)/2:-4)+a.outerHeight()/2+(window.innerHeight-(a.offset().top+a.outerHeight()))+"px",transform:"rotate(45deg) translateY(50%)"}):f.css({right:"-1px",top:"50%",transform:"rotate(45deg) translateY(-50%)"})):"right"===d?(t=a.offset().top+s/2-l/2,o=a.offset().left+n+i,r=e(o,t,c,l),w="+10px",u.css({top:"-7px",left:0,width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:l/2,marginLeft:"0px"}),r.y<h.outerHeight()/2+4?f.css({left:"5.5px",margin:-(f.outerWidth()*Math.SQRT2)/2+"px",top:(r.y>4?r.y/2:-4)+a.outerHeight()/2+a.offset().top+"px",transform:"rotate(45deg) translateY(50%)"}):r.y>=window.innerHeight-h.outerHeight()-4?f.css({left:"5.5px",margin:-(f.outerWidth()*Math.SQRT2)/2+"px",bottom:(window.innerHeight-h.outerHeight()-r.y>4?(window.innerHeight-h.outerHeight()-r.y)/2:-4)+a.outerHeight()/2+(window.innerHeight-(a.offset().top+a.outerHeight()))+"px",transform:"rotate(45deg) translateY(50%)"}):f.css({left:"0",margin:-(f.outerWidth()*Math.SQRT2)/2+"px",top:"50%",transform:"rotate(45deg) translateY(-50%)"})):(t=a.offset().top+a.outerHeight()+i,o=a.offset().left+n/2-c/2,r=e(o,t,c,l),x="+10px",u.css({top:0,left:0,marginLeft:c/2-b/2}),r.x<h.outerWidth()/2+4?f.css({margin:-(f.outerWidth()*Math.SQRT2)/2+"px",left:(r.x>4?r.x/2:-4)+a.outerWidth()/2+a.offset().left+"px",transform:"rotate(45deg) translateX(50%)"}):r.x>window.innerWidth-h.outerWidth()-4?f.css({margin:-(f.outerWidth()*Math.SQRT2)/2+"px",right:(window.innerWidth-h.outerWidth()-r.x>4?(window.innerWidth-h.outerWidth()-r.x)/2:-4)+a.outerWidth()/2+(window.innerWidth-(a.offset().left+a.outerWidth()))+"px",transform:"rotate(45deg) translateX(50%)"}):f.css({left:"50%",transform:"rotate(45deg) translateX(-50%)"})),h.css({top:r.y,left:r.x}),y=Math.SQRT2*c/parseInt(b),W=Math.SQRT2*l/parseInt(v),H=Math.max(y,W),h.velocity({translateY:x,translateX:w},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),u.css({visibility:"visible"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scaleX:H,scaleY:H},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})};x=setTimeout(o,s)},"blur.balloon":function(t){return a.is(document.activeElement)?m=!0:(m=!1,clearTimeout(x),void setTimeout(function(){return a.is(document.activeElement)?m=!0:void(m!==!0&&(h.velocity({opacity:0,translateY:0,translateX:0},{duration:225,queue:!1}),u.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){u.css({visibility:"hidden"}),h.css({visibility:"hidden"}),m=!1}})))},225))}})}))};var e=function(e,o,i,r){var a=e,n=o;return 0>a?a=4:a+i>window.innerWidth&&(a-=a+i-(window.innerWidth-4)),0>n?n=4:n+r>window.innerHeight+t(window).scrollTop()&&(n-=n+r-(window.innerHeight-4)),{x:a,y:n}};t(document).ready(function(){t(".ballooned").balloon()})}(jQuery);
